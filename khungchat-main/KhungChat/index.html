<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./style.css" >
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous"></script>
</head>
<body>
    <div id="main">
        <div id="name">
            <h3 style="padding-top: 10px;margin-left: 18px;">Chat Room</h3>
        </div>
        <div id="main__chat-frame">
            
            <!-- <div class="child">
                <div style="word-wrap: break-word;" >
                    <p class="cmm"> asdasdasdasdsadasdsadasdasdasdsadasdsadsaasdasdasdasdsadasdsadasdasdasdsadasdsadsaasdasdasdasdsadasdsadasdasdasdsadasdsadsaasdasdasdasdsadasdsadasdasdasdsadasdsadsaasdasdasdasdsadasdsadasdasdasdsadasdsadsaasdasdasdasdsadasdsadasdasdasasdasdasdasdsadasdsadasdasdasdsadasdsadsaasdasdasdasdsadasdsadasdasdasdsadasdsadsaasdasdasdasdsadasdsadasdasdasdsadasdsadsaasdasdasdasdsadasdsadasdasdasdsadasdsadsaasdasdasdasdsadasdsadasdasdasdsadasdsadsaasdasdasdasdsadasdsadasdasdasdsadasdsadsaasdasdasdasdsadasdsadasdasdasdsadasdsadsaasdasdasdasdsadasdsadasdasdasdsadasdsadsaasdasdasdasdsadasdsadasdasdasdsadasdsadsaasdasdasdasdsadasdsadasdasdasdsadasdsadsadsadasdsadsa</p>                 
                </div>
            </div>
            <div class="child">
                <div style="word-wrap: break-word;" >
                    <p class="caiconcac"> Ã¡dasdasdasdasjkdjkaskjdasjkdjkasdjkasjssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssskdcasacacsasacascascascacdkjsasaasasdaskjdasjkdkjasjkdjksakjdsakjdjksad</p>
                </div>
            </div>
            <div class="child">
                <div style="word-wrap: break-word; margin-bottom: 10px;" >
                    <p class="cmm"> Messageasassadasdasdasdasdasdadasdasdasdasdasdadasdasdasdasdasdasdadddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddsdasdadaasdasasasasdasdasdasdadsdasdddassaasddsadsasasdasdasdadadasdasdsadsadadasdadsd 8</p>                 
                </div>
            </div> 
            <div class="child">
                <div style="word-wrap: break-word;" >
                    <p class="cmm"> asdasdasdasdsadasdsadasdasdasdsadasdsadsaasdasdasdasdsadasdsadasdasdasdsadasdsadsaasdasdasdasdsadasdsadasdasdasdsadasdsadsaasdasdasdasdsadasdsadasdasdasdsadasdsadsaasdasdasdasdsadasdsadasdasdasdsadasdsadsaasdasdasdasdsadasdsadasdasdasasdasdasdasdsadasdsadasdasdasdsadasdsadsaasdasdasdasdsadasdsadasdasdasdsadasdsadsaasdasdasdasdsadasdsadasdasdasdsadasdsadsaasdasdasdasdsadasdsadasdasdasdsadasdsadsaasdasdasdasdsadasdsadasdasdasdsadasdsadsaasdasdasdasdsadasdsadasdasdasdsadasdsadsaasdasdasdasdsadasdsadasdasdasdsadasdsadsaasdasdasdasdsadasdsadasdasdasdsadasdsadsaasdasdasdasdsadasdsadasdasdasdsadasdsadsaasdasdasdasdsadasdsadasdasdasdsadasdsadsadsadasdsadsa</p>                 
                </div>
            </div>
            <div class="child">
                <div style="word-wrap: break-word;" >
                    <p class="caiconcac"> Ã¡dasdasdasdasjkdjkaskjdasjkdjkasdjkasjssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssskdcasacacsasacascascascacdkjsasaasasdaskjdasjkdkjasjkdjksakjdsakjdjksad</p>
                </div>
            </div>
            <div class="child">
                <div style="word-wrap: break-word; margin-bottom: 10px;" >
                    <p class="cmm"> Messageasassadasdasdasdasdasdadasdasdasdasdasdadasdasdasdasdasdasdadddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddsdasdadaasdasasasasdasdasdasdadsdasdddassaasddsadsasasdasdasdadadasdasdsadsadadasdadsd 8</p>                 
                </div>
            </div>   -->
    </div>
        <div id="main__chat-send"></div>    
    </div>

    <script src="./index.js"></script>
    <script>
        let arr = [
            {
                content : `1`,
                senderid : 1
            },
            {
                content : `2`,
                senderid : 2
            },
            {
                content : `3`,
                senderid : 1
            },
            {
                content : `4`,
                senderid : 2
            },
            {
                content : `5`,
                senderid : 2
            },
            {
                content : `6`,
                senderid : 2
            },
            {
                content : `7`,
                senderid : 2
            },
            {
                content : `8`,
                senderid : 2
            },           
        ];
        let arrOnTop = [
        {
                content : `9`,
                senderid : 2
            },
            {
                content : `10`,
                senderid : 1
            }      
            // {
            //     content : `1`,
            //     senderid : 1
            // },
            // {
            //     content : `2`,
            //     senderid : 2
            // },
            // {
            //     content : `3`,
            //     senderid : 1
            // },
            // {
            //     content : `4`,
            //     senderid : 2
            // },
            // {
            //     content : `5`,
            //     senderid : 2
            // },
            // {
            //     content : `6`,
            //     senderid : 2
            // },
            // {
            //     content : `7`,
            //     senderid : 2
            // },
            // {
            //     content : `8`,
            //     senderid : 2
            // }
        ];
        

    $(document).ready(function()
    {
        function renderFunction(arr){
             var render = arr.map(function(value,index){
            if(value.senderid == 1){
                return `<div class="child">
                <div style="word-wrap: break-word;" >
                    <p class="cmm">${value.content}</p>                 
                </div>
            </div>`;
            }else if(value.senderid == 2){
                return `<div class="child">
                <div style="word-wrap: break-word;" >
                    <p class="caiconcac">${value.content}</p>
                </div>
            </div>`
            }           
        })
            return render.join('');
        }
        $("#main__chat-frame").html(renderFunction(arr))
        let main = document.querySelector('#main__chat-frame');
        main.scrollTop = main.scrollHeight  
        $("#main__chat-frame").scroll(function()
            {
            let xyz ;
            if($(this).scrollTop() == 0)
            {   
                var firstMsg = $('.child:first');
                console.log(firstMsg)
                var curOffset = firstMsg.offset().top - $('#main__chat-frame').scrollTop();

                $("#main__chat-frame").prepend(renderFunction(arrOnTop))
                $('#main__chat-frame').scrollTop(firstMsg.offset().top-curOffset);
            }
        });
});

    </script>
</body>
</html>